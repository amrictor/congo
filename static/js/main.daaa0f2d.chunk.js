(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){},50:function(e,t,a){e.exports=a(74)},55:function(e,t,a){},56:function(e,t,a){},59:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(25),r=a.n(i),o=(a(55),a(12)),c=a(13),l=a(16),u=a(14),m=a(5),p=a(15),h=a(24),d=(a(56),a(75)),v=a(44),g=a(76),b=a(77),y=a(78),S=a(79),E=a(21),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).submitSearchString=a.submitSearchString.bind(Object(m.a)(a)),a.sendGameInvite=a.sendGameInvite.bind(Object(m.a)(a)),a.updateSearchString=a.updateSearchString.bind(Object(m.a)(a)),a.renderSearchInputs=a.renderSearchInputs.bind(Object(m.a)(a)),a.listenForEnter=a.listenForEnter.bind(Object(m.a)(a)),a.handleRejectInvitationButtonClick=a.handleRejectInvitationButtonClick.bind(Object(m.a)(a)),a.handleAcceptInvitationButtonClick=a.handleAcceptInvitationButtonClick.bind(Object(m.a)(a)),a.getInvitationsReceived=a.getInvitationsReceived.bind(Object(m.a)(a)),a.state={searchString:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getInvitationsReceived()}},{key:"getInvitationsReceived",value:function(){var e={communicationType:"getUserInvsLists",userName:this.props.userName};this.props.sendObject(e)}},{key:"render",value:function(){return s.a.createElement("div",{id:"invitations"},s.a.createElement("div",{id:"viewsearch"},s.a.createElement("div",{id:"invites"},s.a.createElement("div",{id:"subtitle"},"Current Invitations"),this.renderSentToInvitationsTable(),this.renderReceivedFromInvitationsTable()),s.a.createElement("div",{id:"search"},s.a.createElement("div",{id:"subtitle"},"Invite a friend to play!"),this.renderSearchInputs(),this.renderInvitePlayer())))}},{key:"listenForEnter",value:function(e){13===e.keyCode&&this.submitSearchString(e)}},{key:"renderSearchInputs",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",{id:"search_input"},s.a.createElement(d.a,{type:"search",placeholder:"Search for a user...",onChange:this.updateSearchString,onKeyDown:this.listenForEnter}),s.a.createElement(v.a,{onClick:this.submitSearchString},"Search"))))}},{key:"updateSearchString",value:function(e){this.setState({searchString:e.target.value})}},{key:"submitSearchString",value:function(){if(""!==this.state.searchString){var e={communicationType:"searchUser",userName:this.state.searchString,playerName:this.props.userName};this.props.sendObject(e)}}},{key:"renderInvitePlayer",value:function(){var e=this,t=[];return this.props.searchResult.forEach((function(a){t.push(s.a.createElement("div",{className:"result",key:a},s.a.createElement("a",{href:"/user/"+a},a),s.a.createElement("div",{className:"invite_button"},s.a.createElement(E.b,{className:"action_button",onClick:function(){e.sendGameInvite(a)}}))))})),s.a.createElement("div",{id:"searchResults"},t.length>0?t:s.a.createElement("p",null,"No users found"))}},{key:"sendGameInvite",value:function(e){var t={communicationType:"sendInvitation",invitationFrom:this.props.userName,invitationTo:e};this.props.sendObject(t),this.getInvitationsReceived(),this.setState({showInvitePlayer:!1})}},{key:"renderSentToInvitationsTable",value:function(){var e=this.props.invitationLists.sentToNames;return e.length>0&&"EMPTY"!==e[0]?s.a.createElement(g.a,{className:"card_condensed"},s.a.createElement(b.a,null,"Sent Invitations"),s.a.createElement(y.a,{size:"sm",className:"table_condensed"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Sent To"),s.a.createElement("th",null,"Time Sent"))),s.a.createElement("tbody",null,this.renderSentToTableRows()))):s.a.createElement(g.a,{className:"card_condensed"},s.a.createElement(b.a,null,"No sent invitations to show"))}},{key:"renderSentToTableRows",value:function(){for(var e=[],t=this.props.invitationLists.sentToNames,a=this.props.invitationLists.sentToTimes,n=0;n<t.length;n++)e.push(s.a.createElement("tr",{key:t[n]+"_"+n},s.a.createElement("td",null,s.a.createElement("a",{href:"/user/"+t[n]},t[n])),s.a.createElement("td",null,s.a.createElement("i",null,this.convertToDate(a[n])))));return e}},{key:"renderReceivedFromInvitationsTable",value:function(){var e=this.props.invitationLists.receivedFromNames;return e.length>0&&"EMPTY"!==e[0]?s.a.createElement(g.a,{className:"card_condensed"},s.a.createElement(b.a,null,"Received Invitations"),s.a.createElement(y.a,{size:"sm",className:"table_condensed"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Received From"),s.a.createElement("th",null,"Time Received"),s.a.createElement("th",null))),s.a.createElement("tbody",null,this.renderReceivedFromTableRows()))):s.a.createElement(g.a,{className:"card_condensed"},s.a.createElement(b.a,null,"No received invitations to show"))}},{key:"renderReceivedFromTableRows",value:function(){for(var e=this,t=[],a=this.props.invitationLists.receivedFromNames,n=this.props.invitationLists.receivedFromTimes,i=function(i){t.push(s.a.createElement("tr",null,s.a.createElement("td",{key:a[i]+"_"+i},s.a.createElement("a",{href:"/user/"+a[i]},a[i])),s.a.createElement("td",null,s.a.createElement("i",null,e.convertToDate(n[i]))),s.a.createElement("td",null,s.a.createElement(S.a,null,s.a.createElement(E.a,{className:"action_button",onClick:function(){return e.handleAcceptInvitationButtonClick(a[i])}}),s.a.createElement(E.d,{className:"action_button",onClick:function(){return e.handleRejectInvitationButtonClick(a[i])}})))))},r=0;r<a.length;r++)i(r);return t}},{key:"convertToDate",value:function(e){return new Date(parseInt(e,10)).toString().substring(0,23)}},{key:"handleRejectInvitationButtonClick",value:function(e){var t={communicationType:"rejectInvite",userName:this.props.userName,invitationFrom:e};this.props.sendObject(t),this.getInvitationsReceived()}},{key:"handleAcceptInvitationButtonClick",value:function(e){var t={communicationType:"acceptInvite",userName:this.props.userName,invitationFrom:e};this.props.sendObject(t),this.getInvitationsReceived()}}]),t}(s.a.Component),k=(a(59),a(37),a(88)),I=a(83),O=a(84),j=a(85),N=a(87),C=a(80),T=a(81),w=a(82),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={open:!1},a.toggleModal=a.toggleModal.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"toggleModal",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:this.props.className,title:this.props.title},s.a.createElement("div",{onClick:this.toggleModal},this.props.button),s.a.createElement(N.a,{isOpen:this.state.open,toggle:this.toggleModal},s.a.createElement(C.a,{toggle:this.toggleModal},"Confirm ",this.props.reason),s.a.createElement(T.a,null,"Are you sure you want to ",this.props.reason.toLowerCase(),"?"),s.a.createElement(w.a,null,s.a.createElement(v.a,{onClick:function(){e.props.onClick(),e.toggleModal()}},"Yes")," ",s.a.createElement(v.a,{onClick:this.toggleModal},"No"))))}}]),t}(s.a.Component),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).windowID=1,a.renderSearchInputs=a.renderSearchInputs.bind(Object(m.a)(a)),a.listenForEnter=a.listenForEnter.bind(Object(m.a)(a)),a.abandonGame=a.abandonGame.bind(Object(m.a)(a)),a.state={matchID:1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getGames()}},{key:"listenForEnter",value:function(e){13===e.keyCode&&this.props.getGames()}},{key:"renderSearchInputs",value:function(){return s.a.createElement("div",{id:"search_input"},s.a.createElement(d.a,{type:"search",placeholder:"Filter on opponent...",onChange:this.props.updateSearchString,onKeyDown:this.listenForEnter}),s.a.createElement(k.a,null,s.a.createElement(I.a,{caret:!0}," ",""===this.props.statusMyGames?"Games Status":this.props.statusMyGames," "),s.a.createElement(O.a,null,s.a.createElement(j.a,{value:"In Progress",onClick:this.props.updateStatus},"In Progress"),s.a.createElement(j.a,{value:"Finished",onClick:this.props.updateStatus},"Finished"),s.a.createElement(j.a,{value:"Abandoned",onClick:this.props.updateStatus},"Abandoned"),s.a.createElement(j.a,{value:"All",onClick:this.props.updateStatus},"All"))),s.a.createElement(v.a,{onClick:this.props.getGames},"Search"))}},{key:"playGame",value:function(e){window.open("/game/".concat(e),"popUpWindow".concat(this.windowID),"resizable=yes,top=200,left=600,width=700,height=700"),this.windowID++}},{key:"abandonGame",value:function(e){var t={communicationType:"quitMatch",matchID:e,playerQuitting:this.props.userName};this.props.sendObject(t),alert("Game sucessfully abandoned"),this.props.getGames()}},{key:"renderTableData",value:function(e){var t=this;return 0===this.props.gamesResults.length?s.a.createElement("p",null,"No matches found"):this.props.gamesResults.map((function(e){var a=e.split(",");return s.a.createElement("div",{className:"result",key:a[0]},s.a.createElement("p",null,s.a.createElement("b",null,s.a.createElement("a",{href:"/user/"+a[1]},a[1]))),s.a.createElement("p",null,s.a.createElement("i",null,a[2])),s.a.createElement("p",null,"Last updated ",a[3]),s.a.createElement("div",{className:"game_buttons"},s.a.createElement(G,{title:"Abandon",className:"game_buttons",onClick:function(e){return t.abandonGame(a[0])},button:s.a.createElement(E.e,{className:"game_buttons"}),reason:"Abandon Game"}),s.a.createElement(E.c,{title:"Play",className:"game_buttons",onClick:function(e){return t.playGame(a[0])}})))}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"mygames"},s.a.createElement("div",{id:"wrapper"},s.a.createElement("div",{id:"games"},s.a.createElement("div",{id:"subtitle"},"My Games"),this.renderSearchInputs(),s.a.createElement("div",{id:"game_data"},this.renderTableData(this.props.gamesResults)))))}}]),t}(s.a.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={communicationType:"unregisterUser",userName:a.props.userName},a.unregisterUser=a.unregisterUser.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"unregisterUser",value:function(){this.props.sendObject(this.state),this.props.logOut()}},{key:"render",value:function(){return s.a.createElement("div",{id:"dash"},s.a.createElement("div",{className:"header"},s.a.createElement("p",null,"Hi ",s.a.createElement("b",null,this.props.userName),"! Access your games and options here."),s.a.createElement(G,{className:"delete",onClick:this.unregisterUser,reason:"Delete Account",button:s.a.createElement("a",{className:"delete"},"Delete Account")})),s.a.createElement("div",{id:"features"},s.a.createElement(R,{isLoggedIn:this.props.isLoggedIn,userName:this.props.userName,gamesResults:this.props.gamesResults,sendObject:this.props.sendObject,searchString:this.props.searchString,statusMyGames:this.props.statusMyGames,getGames:this.props.getGames,updateStatus:this.props.updateStatus,updateSearchString:this.props.updateSearchString}),s.a.createElement(f,{isLoggedIn:this.props.isLoggedIn,userName:this.props.userName,sendObject:this.props.sendObject,searchResult:this.props.searchResult,showInvitePlayer:this.props.showInvitePlayer,invitationSentStatus:this.props.invitationSentStatus,showInvitationSentStatus:this.props.showInvitationSentStatus,invitationLists:this.props.invitationLists,getInvitationsReceived:this.getInvitationsReceived,showRefreshInvs:this.props.showRefreshInvs})))}}]),t}(s.a.Component),F=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"home"},this.props.isLoggedIn()?s.a.createElement(M,{userName:this.props.userName,logOut:this.props.logOut,isLoggedIn:this.props.isLoggedIn,gamesResults:this.props.gamesResults,sendObject:this.props.sendObject,searchResult:this.props.searchResult,showInvitePlayer:this.props.showInvitePlayer,invitationSentStatus:this.props.invitationSentStatus,showInvitationSentStatus:this.props.showInvitationSentStatus,invitationLists:this.props.invitationLists,getInvitationsReceived:this.props.getInvitationsReceived,showRefreshInvs:this.props.showRefreshInvs,searchString:this.props.searchString,statusMyGames:this.props.statusMyGames,getGames:this.props.getGames,updateStatus:this.props.updateStatus,updateSearchString:this.props.updateSearchString}):"Welcome to CongoOnline! Register an account and invite your friends to play Congo!")}}]),t}(s.a.Component),L=(a(68),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selectionType:"pieceID",pieceLocation:-1,requestMove:{communicationType:"requestMoves",communicationVersion:1,matchID:a.props.match.params.matchID,playerName:a.props.playerName,pieceID:"",desiredMoves:[],playerOneName:a.props.player1,playerTwoName:a.props.player2}},a.select=a.select.bind(Object(m.a)(a)),a.changeSelectionType=a.changeSelectionType.bind(Object(m.a)(a)),a.clearSelection=a.clearSelection.bind(Object(m.a)(a)),a.confirmSelection=a.confirmSelection.bind(Object(m.a)(a)),a.selectPiece=a.selectPiece.bind(Object(m.a)(a)),a.selectMove=a.selectMove.bind(Object(m.a)(a)),a.getGameStatus=a.getGameStatus.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getGameStatus",value:function(){var e={communicationType:"requestGameLoad",userName:this.props.userName,communicationVersion:this.state.requestMove.communicationVersion,matchID:this.props.match.params.matchID};this.props.send(e)}},{key:"componentDidMount",value:function(){this.getGameStatus()}},{key:"confirmSelection",value:function(){var e={communicationType:this.state.requestMove.communicationType,communicationVersion:this.state.requestMove.communicationVersion,matchID:this.props.match.params.matchID,pieceID:this.state.requestMove.pieceID,desiredMoves:this.state.requestMove.desiredMoves,userName:this.props.userName,playerName:this.props.playerName,playerOneName:this.props.player1,playerTwoName:this.props.player2};this.props.send(e),this.clearSelection()}},{key:"clearSelection",value:function(){var e=this.state;e.requestMove.pieceID="",e.requestMove.desiredMoves=[],e.selectionType="pieceID",e.pieceLocation=-1,this.setState(e)}},{key:"changeSelectionType",value:function(e){this.setState({selectionType:e})}},{key:"select",value:function(e,t){"active"===this.props.status&&this.props.userName===this.props.playerName&&this.state.pieceLocation!==10*e+t&&("pieceID"===this.state.selectionType?this.selectPiece(e,t):this.selectMove(e,t),"pieceID"===this.state.selectionType&&this.props.game[e][t].length>0&&this.changeSelectionType("desiredMoves"))}},{key:"selectPiece",value:function(e,t){var a=this.state,n=10*e+t;a.requestMove.pieceID=this.props.game[e][t],a.pieceLocation=n,a.requestMove.desiredMoves.push(n),this.setState(a)}},{key:"selectMove",value:function(e,t){var a=this.state.pieceLocation,n=a%10,s=(a-n)/10;if(!("M"!==this.props.game[s][n].toUpperCase()&&this.state.requestMove.desiredMoves.length>=2)){var i=this.state,r=10*e+t;i.requestMove[i.selectionType].push(r),this.setState(i)}}},{key:"isInRiver",value:function(e,t){return 3===e?"river":""}},{key:"isInCastle",value:function(e,t){return 2<=t&&t<=4&&!this.isInRiver(e,t)?"castle":""}},{key:"isSelected",value:function(e,t){var a=this.state.pieceLocation,n=this.state.requestMove.desiredMoves,s=10*e+t;return"".concat(a===s?"selected":"").concat(n.find((function(e){return e===s}))&&a!==s?"move":"")}},{key:"player",value:function(e,t){var a=this.props.userName===this.props.player1,n=this.props.userName===this.props.player2;return""===this.props.game[e][t].trim()?"":this.props.game[e][t]===this.props.game[e][t].toLowerCase()&&a?"player":this.props.game[e][t]===this.props.game[e][t].toUpperCase()&&n?"player":void 0}},{key:"generatePieceClasses",value:function(e,t){return"piece ".concat(this.state.selectionType," ").concat(this.isInRiver(e,t)).concat(this.isInCastle(e,t)," ").concat(this.isSelected(e,t)," ").concat(this.player(e,t))}},{key:"generateMessage",value:function(){switch(this.props.status){case"won":return" won!  Game over!";case"quit":return" quit.  Game halted!";case"active":default:return"'s move"}}},{key:"generateGameStatusMessage",value:function(e){return this.props.playerName===e&&s.a.createElement("div",{className:"player1"},s.a.createElement("p",null,"\ud83c\udf42",s.a.createElement("b",null,e),this.generateMessage(),"\ud83c\udf34"))}},{key:"generateClearMoveButton",value:function(){if("active"===this.props.status&&this.props.userName===this.props.playerName)return s.a.createElement(v.a,{onClick:this.clearSelection},"Clear Move")}},{key:"generateConfirmMoveButton",value:function(){if("active"===this.props.status&&this.props.userName===this.props.playerName)return s.a.createElement(v.a,{onClick:this.confirmSelection},"Confirm Move")}},{key:"flipPieces",value:function(e){return this.props.userName===this.props.player2?e:e.slice().reverse()}},{key:"render",value:function(){var e=this;if(0===this.props.game.length)return"Loading...";var t={P:s.a.createElement(s.a.Fragment,null,"\ud83c\udf41"),L:s.a.createElement(s.a.Fragment,null,"\ud83e\udd81"),G:s.a.createElement(s.a.Fragment,null,"\ud83e\udd92"),M:s.a.createElement(s.a.Fragment,null,"\ud83d\udc12"),E:s.a.createElement(s.a.Fragment,null,"\ud83d\udc18"),C:s.a.createElement(s.a.Fragment,null,"\ud83d\udc0a"),Z:s.a.createElement(s.a.Fragment,null,"\ud83e\udd93"),p:s.a.createElement(s.a.Fragment,null,"\ud83c\udf42"),l:s.a.createElement(s.a.Fragment,null,"\ud83e\udd81"),g:s.a.createElement(s.a.Fragment,null,"\ud83e\udd92"),m:s.a.createElement(s.a.Fragment,null,"\ud83d\udc35"),e:s.a.createElement(s.a.Fragment,null,"\ud83d\udc18"),c:s.a.createElement(s.a.Fragment,null,"\ud83d\udc0a"),z:s.a.createElement(s.a.Fragment,null,"\ud83e\udd93"),s:s.a.createElement(s.a.Fragment,null,"\ud83c\udf34"),S:s.a.createElement(s.a.Fragment,null,"\ud83c\udf33")},a=s.a.createElement("div",null,s.a.createElement("div",{className:"board"},this.flipPieces(this.props.game.map((function(a,n){return s.a.createElement("div",{key:n,className:"board_row"},e.flipPieces(a.map((function(a,i){return s.a.createElement("div",{key:n+"_"+i,className:e.generatePieceClasses(n,i),onClick:function(){return e.select(n,i)}},s.a.createElement("span",null,t[a]))}))))}))))),n=s.a.createElement("div",{className:"buttons"},this.generateClearMoveButton(),this.generateConfirmMoveButton()),i=this.props.player1!==this.props.userName?this.props.player1:this.props.player2;return s.a.createElement("div",{id:"gameboard"},this.generateGameStatusMessage(i),a,this.generateGameStatusMessage(this.props.userName),n)}}]),t}(n.Component)),D=a(86),_=(a(69),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={submit:a.props.action},a.handleFormSubmit=a.handleFormSubmit.bind(Object(m.a)(a)),a.updateTextField=a.updateTextField.bind(Object(m.a)(a)),a.listenForEnter=a.listenForEnter.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(){for(var e={userName:/[A-Za-z0-9]+/,userEmail:/[A-Za-z0-9_\-.]+@[A-Za-z0-9_\-.]+\.[A-Za-z0-9_\-.]+/,userPassword:/[A-Za-z0-9]+/},t=0;t<Object.keys(this.state.submit).length;t++){var a=Object.keys(this.state.submit)[t];if("string"==typeof this.state.submit[a]&&!this.state.submit[a].match(e[a]))return void alert("Please ensure that you have entered a valid email.")}this.props.sendToServer(this.state.submit)}},{key:"updateTextField",value:function(e,t){var a=this.state;a.submit[e]=t,this.setState(a)}},{key:"listenForEnter",value:function(e){13===e.keyCode&&this.handleFormSubmit(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"form"},this.props.isLoggedIn()?"You're already logged in!":s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"page_title"},this.props.title),Object.keys(this.state.submit).filter((function(e){return e.match(/user/i)})).map((function(t){var a=t.match(/email/,"gi")?"email":t.match(/password/i)?"password":"text";return s.a.createElement("div",{className:"form_input"},s.a.createElement(D.a,{for:t},t.replace("user",""),": "),s.a.createElement(d.a,{type:a,key:t,onChange:function(a){e.updateTextField(t,a.target.value)},onKeyDown:e.listenForEnter}))})),s.a.createElement(v.a,{block:!0,size:"sm",onClick:this.handleFormSubmit},"Submit")))}}]),t}(s.a.Component)),P=a(48),A=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.isLoggedIn()?s.a.createElement("a",{className:"nav-link right",href:"/",onClick:this.props.logOut},"Log Out (",s.a.createElement("u",null,this.props.userName),")"):s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{className:"nav-link right",href:"/register"},"Register"),s.a.createElement("a",{className:"nav-link right",href:"/login"},"Log In"));return s.a.createElement("div",{id:"header"},s.a.createElement("div",{id:"title"},"CongoOnline",s.a.createElement(P.a,{id:"icon"})),s.a.createElement("div",{id:"menu"},s.a.createElement("a",{className:"nav-link",href:"/"},"Home"),e))}}]),t}(s.a.Component),B={communicationType:"registerUser",communicationVersion:1,userName:"",userEmail:"",userPassword:""},q={communicationType:"attemptLogin",communicationVersion:1,userEmail:"",userPassword:""},U={communicationType:"attemptLogout",communicationVersion:1,userEmail:""},x=(a(70),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getGames=a.getGames.bind(Object(m.a)(a)),a.updateSearchString=a.updateSearchString.bind(Object(m.a)(a)),a.renderSearchInputs=a.renderSearchInputs.bind(Object(m.a)(a)),a.listenForEnter=a.listenForEnter.bind(Object(m.a)(a)),a.updateStatus=a.updateStatus.bind(Object(m.a)(a)),a.state={searchString:"",status:"In Progress",matchID:1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getGames",value:function(){var e={communicationType:"searchGames",userName:this.props.match.params.username,playerTwoName:this.state.searchString,status:this.state.status};this.props.sendObject(e)}},{key:"componentDidMount",value:function(){this.getGames()}},{key:"listenForEnter",value:function(e){13===e.keyCode&&this.getGames()}},{key:"updateStatus",value:function(e){var t=this;this.setState({status:e.target.value},(function(){return t.getGames()}))}},{key:"renderSearchInputs",value:function(){return s.a.createElement("div",{id:"search_input"},s.a.createElement(d.a,{type:"search",placeholder:"Filter on opponent...",onChange:this.updateSearchString,onKeyDown:this.listenForEnter}),s.a.createElement(k.a,null,s.a.createElement(I.a,{caret:!0}," ",""===this.state.status?"Games Status":this.state.status," "),s.a.createElement(O.a,null,s.a.createElement(j.a,{value:"In Progress",onClick:this.updateStatus},"In Progress"),s.a.createElement(j.a,{value:"Finished",onClick:this.updateStatus},"Finished"),s.a.createElement(j.a,{value:"Abandoned",onClick:this.updateStatus},"Abandoned"),s.a.createElement(j.a,{value:"All",onClick:this.updateStatus},"All"))),s.a.createElement(v.a,{onClick:this.getGames},"Search"))}},{key:"updateSearchString",value:function(e){this.setState({searchString:e.target.value})}},{key:"sendGameInvite",value:function(e){var t={communicationType:"sendInvitation",invitationFrom:this.props.userName,invitationTo:e};this.props.sendObject(t),this.setState({showInvitePlayer:!1})}},{key:"renderTableData",value:function(e){return 0===this.props.gamesResults.length?s.a.createElement("p",null,"No matches found"):this.props.gamesResults.map((function(e){var t=e.split(",");return s.a.createElement("div",{className:"result",key:t[0]},s.a.createElement("p",null,s.a.createElement("b",null,s.a.createElement("a",{href:"/user/"+t[1]},t[1]))),s.a.createElement("p",null,s.a.createElement("i",null,t[2])),s.a.createElement("p",null,"Last updated ",t[3]))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"profiles"},s.a.createElement("div",{id:"wrapper"},s.a.createElement("div",{id:"games"},s.a.createElement("div",{id:"subtitle"},s.a.createElement("b",null,this.props.match.params.username),"'s Game History",s.a.createElement(E.b,{className:"invite_button",title:"Invite to play!",onClick:function(){e.sendGameInvite(e.props.match.params.username)}})),this.renderSearchInputs(),s.a.createElement("div",{id:"game_data"},this.renderTableData(this.props.gamesResults)))))}}]),t}(s.a.Component)),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateSearchResult=a.updateSearchResult.bind(Object(m.a)(a)),a.state={logIn:{},player1:["player1"],player2:["player2"],next_turn:["player1"],match_id:["1"],games:[[]],status:"active",searchResult:[],searchGames:[],invitationLists:{sentToNames:[],sentToTimes:[],receivedFromNames:[],receivedFromTimes:[]},searchString:"",statusMyGames:"In Progress"},a.connection=null,a.sendObject=a.sendObject.bind(Object(m.a)(a)),a.logOut=a.logOut.bind(Object(m.a)(a)),a.isLoggedIn=a.isLoggedIn.bind(Object(m.a)(a)),a.updateSearchResult=a.updateSearchResult.bind(Object(m.a)(a)),a.setCookie=a.setCookie.bind(Object(m.a)(a)),a.checkCookie=a.checkCookie.bind(Object(m.a)(a)),a.updateSearchGamesResult=a.updateSearchGamesResult.bind(Object(m.a)(a)),a.setInvitationsLists=a.setInvitationsLists.bind(Object(m.a)(a)),a.getGames=a.getGames.bind(Object(m.a)(a)),a.updateStatus=a.updateStatus.bind(Object(m.a)(a)),a.updateSearchString=a.updateSearchString.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkCookie(),this.connection=new WebSocket("ws://localhost:4444"),this.connection.onopen=function(){console.log("Connected!")},this.connection.onerror=function(e){console.log("WebSocket Error: "+e),alert("Cannot reach server!")},this.connection.onmessage=function(e){var t=JSON.parse(e.data);this.handleUpdate(t)}.bind(this),this.connection.onclose=function(e){console.log("Connection lost")}}},{key:"handleUpdate",value:function(e){switch(e.communicationType){case"registrationSuccess":this.updateLogin(e);break;case"invitationSentStatus":this.updateInvitationSentStatus(e);break;case"error":alert(e.statusMessage),105===e.errorCode&&(window.location.href="/");break;case"updateBoard":this.updateBoard(e);break;case"loginSuccess":case"logoutSuccess":this.updateLogin(e);break;case"searchResult":this.updateSearchResult(e);break;case"endMatch":this.endMatch(e);break;case"searchGamesResult":this.updateSearchGamesResult(e);break;case"sendUserInvsLists":this.setInvitationsLists(e);break;case"inviteAcceptStatus":this.getGames()}}},{key:"updateSearchGamesResult",value:function(e){this.setState({searchGames:e.searchResults})}},{key:"updateLogin",value:function(e){var t="logoutSuccess"===e.communicationType?{}:e;this.setState({logIn:t}),this.setCookie(t),window.location.href="/"}},{key:"updateBoard",value:function(e){var t=this.state;t.games=[e.updatedBoard],t.next_turn=[e.whoseTurn],t.match_id=[e.matchID],t.player1=[e.playerOneName],t.player2=[e.playerTwoName],t.status=e.endCondition,this.setState(t)}},{key:"endMatch",value:function(e){var t=this.state;t.games=[e.updatedBoard],t.status=e.endCondition,this.setState(t)}},{key:"setCookie",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var n=0===t?"":"expires="+a.toUTCString()+";path=/";document.cookie="logIn="+JSON.stringify(e)+";"+n}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("logIn");if(""!==e){var t=JSON.parse(e);this.setState({logIn:t})}}},{key:"sendObject",value:function(e){var t=this;!function a(n){setTimeout((function(){1===t.connection.readyState?null!=n&&(e.userName||(e.userName=t.state.logIn.userName),n()):a(n)}),5)}((function(){return t.connection.send(JSON.stringify(e))}))}},{key:"logOut",value:function(){this.sendObject(U)}},{key:"isLoggedIn",value:function(){return"{}"!==JSON.stringify(this.state.logIn)}},{key:"updateSearchResult",value:function(e){this.setState({searchResult:e.searchResults})}},{key:"updateInvitationSentStatus",value:function(e){this.setState({invitationSentStatus:e}),this.setState({showInvitationSentStatus:!0}),this.setState({showInvitePlayer:!0})}},{key:"setInvitationsLists",value:function(e){var t={sentToNames:e.sentToNames,sentToTimes:e.sentToTimes,receivedFromNames:e.receivedFromNames,receivedFromTimes:e.receivedFromTimes};this.setState({invitationLists:t})}},{key:"getGames",value:function(){var e={communicationType:"searchGames",userName:this.state.logIn.userName,playerTwoName:this.state.searchString,status:this.state.statusMyGames};this.sendObject(e)}},{key:"updateStatus",value:function(e){var t=this;this.setState({statusMyGames:e.target.value},(function(){return t.getGames()})),console.log("statusMyGames: "+this.state.statusMyGames)}},{key:"updateSearchString",value:function(e){this.setState({searchString:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"Application"},s.a.createElement(A,{sendObject:this.sendObject,userName:this.state.logIn.userName,isLoggedIn:this.isLoggedIn,logOut:this.logOut}),s.a.createElement("div",{id:"page_container"},s.a.createElement(h.c,{location:window.location},s.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(F,{isLoggedIn:e.isLoggedIn,userName:e.state.logIn.userName,logOut:e.logOut,sendObject:e.sendObject,searchResult:e.state.searchResult,showInvitePlayer:e.state.showInvitePlayer,invitationSentStatus:e.state.invitationSentStatus,showInvitationSentStatus:e.state.showInvitationSentStatus,invitationLists:e.state.invitationLists,gamesResults:e.state.searchGames,showRefreshInvs:e.state.showRefreshInvs,searchString:e.state.searchString,statusMyGames:e.state.statusMyGames,getGames:e.getGames,updateStatus:e.updateStatus,updateSearchString:e.updateSearchString})}}),s.a.createElement(h.a,{path:"/register",render:function(t){return s.a.createElement(_,Object.assign({},t,{title:"Register an account",action:B,isLoggedIn:e.isLoggedIn,sendToServer:e.sendObject}))}}),s.a.createElement(h.a,{path:"/login",render:function(t){return s.a.createElement(_,Object.assign({},t,{title:"Log in",action:q,isLoggedIn:e.isLoggedIn,sendToServer:e.sendObject}))}}),s.a.createElement(h.a,{path:"/game/:matchID",render:function(t){return s.a.createElement(L,Object.assign({},t,{game:e.state.games[0],playerName:e.state.next_turn[0],player1:e.state.player1[0],player2:e.state.player2[0],match_id:e.state.match_id[0],status:e.state.status,userName:e.state.logIn.userName,send:e.sendObject}))}}),s.a.createElement(h.a,{path:"/user/:username",render:function(t){return s.a.createElement(x,Object.assign({},t,{game:e.state.games[0],playerName:e.state.next_turn[0],player1:e.state.player1[0],player2:e.state.player2[0],match_id:e.state.match_id[0],status:e.state.status,userName:e.state.logIn.userName,sendObject:e.sendObject,gamesResults:e.state.searchGames}))}}))))}}]),t}(n.Component),V=Object(h.f)(z);var J=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(33);a(73);r.a.render(s.a.createElement(W.a,null,s.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.daaa0f2d.chunk.js.map